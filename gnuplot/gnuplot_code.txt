#Filter data for Class (column F) = "Obesity / Weight Status"
grep -iw 'Obesity / Weight Status' Nutrition_Physical_Activity_and_Obesity_Behavioral_Risk_Factor_Surveillance_System.csv > obesity_data.csv 

#Select rows that have StratificationCategory = 'Total' and Location Abbreviation = 'VT'
awk  -F "," -v OFS=',' '{ if(($3 == "VT") && ($18 == "Total")) { print $0 }}' obesity_data.csv > vt_total.csv

#Extract columns of data so that it is ready for plot
cut -d ',' -f 1,2,3,4,8,10,11  vt_total.csv > vt_obesity_data.csv


#start gnuplot on dokcer container
#set gnuplot parameters

set terminal png

set datafile separator “,”
set key left top Left title 'Legend' box 3
set xrange [2010:2016]
set yrange [20:40]
set y2tics nomirror
set ytics nomirror
set xlabel 'Year'

set ylabel '(%) Percentage of Adults'

set y2label '(%) Percentage of Adults'
set grid

set output 'vt_twovar_plot.png'
set title 'Obesity/Weight Status in Adults for State of Vermont by Year'

plot "vt_obesity_data.csv" \
   using 1:(stringcolumn(5) eq "Percent of adults aged 18 years and older who have obesity"? column(7):1/0)  axes x1y1  title "obesity" lc rgb "red" , \
"" using 1:(stringcolumn(5) eq "Percent of adults aged 18 years and older who have an overweight classification"? column(7):1/0) axes x1y2 title "overweight" lc rgb "green"  

set output 'vt_obesity_plot.png'
set title 'Obesity % in Adults for State of Vermont by Year'

plot "vt_obesity_data.csv" \
   using 1:(stringcolumn(5) eq "Percent of adults aged 18 years and older who have obesity"? column(7):1/0)  axes x1y1  title "obesity" lc rgb "red" \
   smooth frequency with boxes

set output 'vt_overweight_plot.png'
set title 'Overweight % in Adults for State of Vermont by Year'

plot "vt_obesity_data.csv" \
   using 1:(stringcolumn(5) eq "Percent of adults aged 18 years and older who have an overweight classification"? column(7):1/0) axes x1y2 title "overweight" lc rgb "green" 


#View plot output on windows
docker cp cca404caa4fd:/CEBD1160_Project/gnuplot/vt_twovar_plot.png C:/Users/Luciana/CEBD1160/CEBD1160_Project/gnuplot/vt_twovar_plot.png
docker cp cca404caa4fd:/CEBD1160_Project/gnuplot/vt_obesity_plot.png C:/Users/Luciana/CEBD1160/CEBD1160_Project/gnuplot/vt_obesity_plot.png
docker cp cca404caa4fd:/CEBD1160_Project/gnuplot/vt_overweight_plot.png C:/Users/Luciana/CEBD1160/CEBD1160_Project/gnuplot/vt_overweight_plot.png





